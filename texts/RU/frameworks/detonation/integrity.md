
---

## 1. Миссия и назначение

- **Detonation** ускоряет запуск технологических стартапов, превращая классические промышленно-научные задачи в эластичные цифровые фабрики.
- Он упрощает управление **сложным оборудованием** (3D-принтеры, станки, роботы, датчики, дроны и т.д.), делает возможным обрабатывать **огромные потоки данных** и одновременно выполнять высоконагруженные вычисления.
- Объединяет оборудование в **единый кластер**, прозрачно распределяя ресурсы: CPU, память, диски, сети и пр.
- Обеспечивает **реальное время** реакции при событийной обработке — от микросекунд до десятков микросекунд.

Таким образом, Detonation даёт сообществу доступ к **глобальной вычислительной сети** и распределённому хранилищу данных, обычно доступному лишь крупным корпорациям.

---

## 2. Общий обзор Detonation

### Что решает Detonation

1. **Ультрабыстрый стриминговый обмен**: нет типовых gRPC/HTTP-запросов; детонационный протокол (SHOCK) рассчитан на непрерывный поток данных.
2. **Единая платформа для вычислений**: автоматически распределяет задачу по свободным узлам, будь то миниатюрный «компьютер 5×5 см» с 512 МБ ОЗУ или большой серверный кластер.
3. **Минимальный overhead**: всё написано на С/Зig; контейнеры запускаются через `crun` (или аналог), размер базового контейнера — порядка **500 КБ**, а время старта — **практически 0 секунд**.
4. **Специализированная ОС**: используется особая сборка Linux, оптимизированная под высокоскоростной стриминг и eBPF.  
5. **Прозрачное распределение ресурсов**: свободные CPU, диски и память принадлежат децентрализованной сети (**exp**), откуда любой участник может взять их для своих задач по принципу взаимообмена.  
6. **Строгая событийная модель**: все действия — это события (packets/flows), которые роутятся внутри системы с ультранизкими задержками.

### Ключевые особенности

- **Реакция в 100 раз быстрее**, чем в Kubernetes: кластеры перестраиваются и реагируют на нагрузку за **миллисекунды или микросекунды**, а не за секунды.  
- **Масштабируемость**: от одного микроконтроллера до тысячи серверов. При подключении новых устройств (например, 100 станков) они тут же видны как **один монолитный кластер**.  
- **Низкоуровневое решение**: используется eBPF, UDP/шину SHOCK, кольцевые буферы в `shm`, а также специализированные модули для высокопроизводительного чтения и записи на блочные устройства.  
- **Полное отсутствие состояния в сервисах**: всё хранится в распределённом кэше (kdb). Это упрощает горизонтальное масштабирование и мгновенные перезапуски.

---

## 3. Архитектура и ключевые компоненты

Detonation концептуально делится на **два уровня**: внутри каждого узла (Host Level) и на уровне всего кластера (Cluster Level). При этом система спроектирована **стримингово** — данные движутся через потоки (Flows) и пакеты без постоянного установления TCP-сессий.

### 3.1 Внутри каждого узла (Host Level)

#### 1. **Router**  
Каждый узел запускает **Router** — центральный процесс, который:
- Принимает входящие пакеты (UDP) от других узлов или внешнего мира.
- Маршрутизирует потоки данных внутри узла (через eBPF + shm-кольцевые буферы).
- Управляет подключением контейнеров (ComputeSet, Data Services и т.д.).
- Следит за локальными ресурсами (оперативная память, диски, сетевые интерфейсы и т.д.).

#### 2. **eBPF User Space**  
В Detonation активно используются **eBPF-модули**: мини-программы, которые фильтруют, перенаправляют и помечают пакеты на лету, не выходя в юзерспейс. Это даёт задержки в **десятки наносекунд** и колоссальную пропускную способность.

#### 3. **SHM-кольцевые буферы**  
Внутри узла контейнеры (микросервисы) обмениваются сообщениями не по TCP, а через сегменты **POSIX Shared Memory** (shm). Так достигается ультранизкая задержка для пакетов (сотни наносекунд) и высокая скорость обмена.

#### 4. **Containers**  
Контейнеры в Detonation запускаются с помощью **crun** (либо аналогичного инструмента), имеют размер от ~500 КБ и почти мгновенно стартуют.  
**Виды контейнеров**:  
- **ComputeSet**: содержит одну или несколько функций (**ComputFunction**) для тяжёлых вычислений, часто с ускорителями (GPU, ASIC и т.д.).  
- **Data Service**: представляет интерфейс к хранилищу (например, к блочным устройствам) или базам данных.  
- **Business Logic** (Logic Services): отвечает за ветвление потоков и принятие решений на уровне более сложных сценариев.  

При этом контейнер не хранит состояние — вся информация обрабатывается на лету или в кэше.

#### 5. **KDB (кэш)**  
Состояние процессов, контексты сессий, токены и прочие метаданные хранятся в распределённом kdb. Он доступен любому узлу, реплицирован и обеспечивает миллионы транзакций в секунду.

---

### 3.2 На уровне кластера (Cluster Level)

Когда узлов несколько, они образуют **единый кластер**:

- **Узлы** обмениваются пакетами через UDP, а высокоуровневые данные — через протокол **SHOCK** (потоковый, без классических HTTP-заголовков).  
- **Контроллер кластера** (иногда называют Blaster/Igniter) наблюдает за всеми узлами, автоматически создаёт/удаляет инстансы контейнеров по мере изменения нагрузки.  
- **Salins Distributed FS**  
  - Аналог старого DDFS, но с учётом новых доработок.  
  - Распределённая файловая система, похожая на IPFS, но без его ограничений.  
  - Автоматически монтирует свободные диски узлов, превращая их в единое «облако» хранения.  
  - Задействует eBPF, чтобы блочные устройства могли выдавать и принимать **миллионы пакетов в секунду**.  
- **exp-сеть**  
  - Все неиспользуемые ресурсы кластера (CPU, RAM, диски) принадлежат единой децентрализованной сети **exp**.  
  - Участники могут «одолжить» ресурсы из exp или сами предоставить их другим, рассчитываясь взаимозачётами через блокчейн.  

---

## 4. Слои Detonation (концептуально)

Для упрощения управления внутри одного узла все следующие слои свёрнуты в **один процесс** (Router + Igniter). Но логически их можно разделить:

1. **Equipment** — управляет оборудованием узла: от физических устройств (GPU, FPGA, диски, сетевые карты) до виртуальных (виртуальные сети, виртуальные диски и т.д.).  
2. **Network** — отвечает за маршрутизацию, фильтрацию и балансировку трафика с помощью eBPF/XDP/UDP. Позволяет достигать реакций на уровне микросекунд.  
3. **Storage** — хранение данных в Salins Distributed FS и взаимодействие с кэшем kdb. Задействует блочные устройства и драйверы для быстрого чтения/записи.  
4. **Workload** — собственно вычислительные нагрузки (контейнеры, виртуалки), управление жизненным циклом ComputeSet и т.д.

---

## 5. Взаимодействие (стриминговая модель)

### 5.1 Потоки данных (Flows)

- **Непрерывные потоки**: в Detonation принято не устанавливать постоянные TCP-соединения между сервисами. Данные разрезаются на пакеты (обычно до 512 байт) и пересылаются в кольцевой буфер или по UDP (между узлами).  
- **Routing**: eBPF-модули в Router перенаправляют пакеты на нужные контейнеры с учётом текущей загрузки.  
- **DAG-процессы**: бизнес-логика и вычислительные графы (DAG) в Detonation построены через «роутеровую» схему. Пакеты могут **ветвиться**, **дублироваться**, **циклически** повторяться — всё в зависимости от конфигурации.  

### 5.2 Business Logic Services и DAG

- **Business Logic**-контейнеры не занимаются тяжёлыми вычислениями; они **анализируют** контекст и решают, куда отправить пакет дальше.  
- Вся логика хранения состояния (сессии, доступы, промежуточные данные) — в **kdb**. Контейнеру приходит лишь ключ или ID нужных данных.  

### 5.3 Data Services

- Нет прямых подключений «сервис → база данных»; всё идёт через единый маршрут (Router + eBPF).  
- Data Service получает пакет-запрос, читает/записывает в блочное устройство и возвращает результат в виде потока пакетов.  
- Внутри может быть любая СУБД или файловая структура, но снаружи она видна как **стриминговый сервис**.

---

## 6. Применения и примеры

### 6.1 Цифровая фабрика

- Допустим, у вас 100 станков с мини-ПК на борту. Связавшись в сеть, они автоматически образуют **единый кластер** Detonation.  
- Любая задача (например, сбор телеметрии, загрузка STL-файлов для 3D-печати) стримится в кластер.  
- Система сама решает, какой узел лучше использовать для вычислений или хранения данных, а вся логика роутинга — внутри eBPF.  
- При пиковых нагрузках Detonation перераспределяет потоки, используя все 100 станков.

### 6.2 Научные вычисления

- Высокоскоростные потоки данных (сотни гигабит в секунду) от датчиков или камер поступают в кластер, где разбиваются на сегменты.  
- Каждый узел обрабатывает часть данных параллельно; результат складывается в Salins FS или передаётся дальше для моделирования (Physics, ML, FPGA-логика).  
- В случае перегрузки система моментально «оттягивает» часть вычислений на другие узлы.

### 6.3 IoT / Robotics / Drones

- Устройства (дроны, роботы, сенсоры) могут работать на крошечных платах с 512 МБ RAM и микро-Linux.  
- Detonation даёт единый механизм стриминга; если дрон «свободен», он участвует в распределённых задачах.  
- Единый kdb-кэш хранит текущее состояние всех устройств (положение, состояние батареи, температура и т.п.).

---

## 7. Почему Detonation быстрее Kubernetes

1. **Стриминг vs. RPC**: Kubernetes в основном опирается на gRPC/HTTP-запросы и сервисы с собственным состоянием; Detonation — непрерывные потоки пакетов.  
2. **Легковесность контейнеров**: базовый контейнер ~500 КБ, запуск мгновенный, нет громоздких зависимостей от Docker/Containerd.  
3. **Низкоуровневый код**: без Go-рантайма, без лишних абстракций — только C, Zig, eBPF.  
4. **Сверхбыстрая маршрутизация**: eBPF в ядре Linux + шеринговая память (shm) внутри узла. Это убирает лишние контекстные переключения.  
5. **Реакция в реальном времени**: Detonation реагирует на изменение нагрузки за доли секунды или даже микросекунды. Kubernetes обычно масштабируется за секунды.  
6. **Salins Distributed FS**: аналог IPFS, но упрощён, с приоритетом на скорость и возможность выдачи миллионов пакетов в секунду.

---

## 8. Преимущества Detonation

- **Ультранизкие задержки** и **высокая пропускная способность** — идеальный выбор для промышленного стриминга, телеметрии и научных экспериментов.  
- **Масштабируемость** от маленьких SBC (Single Board Computer) до кластеров в десятки тысяч серверов.  
- **Децентрализованное хранение** в Salins Distributed FS с возможностью шифрования и быстрого доступа.  
- **Гибкое разделение ресурсов** и взаимообмен через сеть **exp** с блокчейн-учетом.  
- **Простое развертывание**: подключаете новое устройство — оно тут же становится частью кластера.  
- **Стейтлес-функции**: контекст в kdb, что упрощает ошибки, откаты и мгновенные масштабирования.

---

## 9. Заключение

**Detonation** — это новая эра для распределённых вычислений в реальном времени. Он берёт лучшее из идей Kubernetes, IPFS, eBPF, но формирует **низкоуровневую стриминговую платформу** с рекордной скоростью и лёгкостью. Подход «нет состояния в сервисах, только потоки и быстрый роутинг» открывает колоссальные возможности:

- Управление тысячами станков и датчиков «как одним» кластером.  
- Мгновенный анализ сотен гигабит данных на лету.  
- Гибкое распараллеливание любых вычислительных задач.  
- Единая сеть хранения, куда сливаются все данные с прозрачным шифрованием и блокчейн-взаиморасчётами.

Detonation — универсальный **«цифровой комбайн»** для промышленного интернета вещей, научных лабораторий, робототехники, AI, вычислительной химии, 3D-печати и множества других сфер. Его **ультрабыстрый отклик** и микросекундная маршрутизация делают Detonation идеальным выбором для современных фабрик и сложных R&D-процессов.

---  

© 2025 Solenopsys. Все права защищены.