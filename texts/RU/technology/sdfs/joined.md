# SDFS (Solenopsys Distributed File System)

SDFS представляет собой современную файловую систему с журналированием, построенную на основе деревьев B+ и оптимизированную для работы как с высокопроизводительными NVMe-дисками, так и с традиционными HDD для холодного хранения. Система вдохновлена концепциями IPFS, но работает на уровне ядра Linux, что обеспечивает существенно более высокую производительность.

## Фундаментальные принципы работы

SDFS объединяет все физические диски кластера в единое пространство хранения, где каждый диск становится общим ресурсом вместо локального хранилища. Система использует гибридный подход между IPFS и ZFS, работая на уровне ядра с блоками данных вместо файлов. Это позволяет достичь производительности, в 10 раз превышающей показатели традиционных распределённых файловых систем.

### Сетевая архитектура

SDFS реализует многоуровневую сетевую архитектуру:

Каждый узел сети представляет собой кластер, где данные хранятся локально, но доступны глобально через систему прокси-узлов. При этом даже в сети из 1000 узлов с ограниченной пропускной способностью (50 Мбит/с на узел) система обеспечивает эффективный доступ ко всем данным благодаря умной маршрутизации и кэшированию.

Центральный кластер метаданных управляет информацией о расположении блоков и обеспечивает:
- Динамическую аллокацию ресурсов
- Балансировку нагрузки между узлами
- Оптимизацию маршрутов доступа к данным
- Географически-осознанное распределение данных

### Инновационный подход к хранению данных

В отличие от традиционных систем, SDFS полностью устраняет концепцию архивов. Все данные, включая образы систем и резервные копии, хранятся в сегментированной форме с использованием системы упаковки Slice. Это позволяет:

- Мгновенно передавать рабочие нагрузки между узлами без распаковки
- Избежать дублирования данных при работе с образами
- Оптимизировать использование пространства через многоуровневую дедупликацию

## Техническая архитектура

### Организация блоков данных

SDFS использует динамическую систему блоков:

Микроблоки (4 КБ – 1024 КБ):
- Хранят объекты и исходный код
- Приоритетно размещаются на NVMe
- Объединяются алгоритмом Buddy для оптимизации хранения

Макроблоки (1 МБ – 256 МБ):
- Содержат мультимедиа и файлы баз данных
- Приоритетно размещаются на HDD
- Группируются в экстенты для оптимизации доступа

Каждый блок получает уникальный хэш SHA256, что обеспечивает целостность данных и позволяет реализовать глобальную адресацию.

### Горячее и холодное хранилище

Горячее хранилище (NVMe/SSD):
- Обеспечивает произвольный доступ к данным
- Поддерживает все операции файловой системы Linux
- Использует встроенные механизмы выравнивания износа
- Оптимизировано для высокой производительности

Холодное хранилище (HDD):
- Хранит большие блоки в экстентах
- Использует алгоритм Buddy для оптимизации размещения
- Доступ преимущественно через API
- Оптимизировано для объемного хранения

Система автоматически перемещает данные между уровнями хранения на основе статистики доступа: макроблоки с минимальной частотой обращений автоматически мигрируют на HDD.

### Технологические оптимизации

SDFS максимально использует возможности современного оборудования и Linux:

- io_uring для асинхронного ввода-вывода, что снижает нагрузку на CPU
- Аппаратное ускорение SHA256 (до 1 ГБ/с на современных процессорах)
- Динамическая балансировка нагрузки с учетом географического расположения узлов
- Оптимизированный сетевой стек для передачи данных между узлами

## Уникальные преимущества SDFS

SDFS предлагает ряд существенных улучшений по сравнению с традиционными системами:

- Работа на уровне ядра Linux обеспечивает максимальную производительность
- Отсутствие необходимости в отдельном архивировании данных
- Мгновенная миграция рабочих нагрузок между узлами
- Автоматическая оптимизация размещения данных
- Эффективное использование как быстрых NVMe, так и емких HDD
- Высокая масштабируемость благодаря продвинутой сетевой архитектуре

SDFS представляет собой следующий этап эволюции распределенных файловых систем, объединяя передовые технологии хранения данных с эффективной сетевой архитектурой. Система особенно хорошо подходит для современных корпоративных и облачных инфраструктур, где требуется высокая производительность, масштабируемость и эффективное использование ресурсов.