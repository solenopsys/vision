# Detonation: микросервисная платформа для распределенных вычислений

Detonation представляет собой современную платформу, основанную на микросервисной архитектуре, предназначенную для эффективного управления распределенными вычислениями. Эта система сочетает в себе передовые технологии хранения данных, разнообразные языки программирования и модульную структуру для создания гибкой и масштабируемой инфраструктуры.

## Технологическая база

### Языки программирования

В Detonation применяется смешанная парадигма использования языков программирования, что позволяет использовать уникальные сильные стороны каждого языка для конкретных задач. Микросервисная архитектура, основанная на изолированных контейнерах, беспрепятственно обеспечивает это разнообразие.

#### Основные языки разработки

- **Golang**: Известен своей простотой, скоростью и возможностями параллельной обработки. Идеально подходит для легких микросервисов и операций сетевого стека.
- **Zig**: Современный язык с простым синтаксисом и богатым набором функций. Подходит для разработки микроядер на основе C и C++, а также для сложных модулей WebAssembly.
- **C**: Используется для разработки программ для микроконтроллеров, драйверов и модулей Linux, а также модулей CUDA для обработки данных.
- **C++**: Подходит для сложного программирования на микроконтроллерах и продвинутых модулей CUDA.
- **Python**: Универсальный язык сценариев, идеально подходящий для экспериментов с бэкендом, системных сценариев, ИИ и анализа данных.

### Базы данных

Detonation использует несколько баз данных, каждая из которых предназначена для конкретных задач. Эти базы данных имеют простую структуру, экономно используют память и могут работать на различных архитектурах процессоров.

- **PostgreSQL**: Отлично подходит для больших наборов однородных данных. Известен надежностью, масштабируемостью и поддержкой сложных типов данных.
- **ClickHouse**: Специализированная база данных для столбцовой аналитики данных, созданная для обработки аналитических запросов в реальном времени. Идеально подходит для бизнес-анализа.
- **MongoDB**: Лучше всего подходит для хранения и управления большими объемами данных, не имеющих фиксированной структуры. Идеально для быстрой разработки и растущих приложений.
- **Dgraph**: Предназначен специально для данных, хранящихся в виде графов, и для анализа связей между точками данных. Эффективен для детальных запросов о взаимосвязях.

### Хранение данных

В Detonation используются разные базы данных для хранения данных. Каждая база данных подключена к протоколу SHOCK, который обеспечивает быстрый и легкий доступ к данным. Контроль доступа к данным осуществляется двумя способами: через функции безопасности самих баз данных и через дополнительный уровень безопасности, который проверяет права доступа с использованием токенов и правил на основе конкретных атрибутов.

### Кеширование

KeyDB используется в качестве кеша для обмена данными между микросервисами и микроядрами, обеспечивая быстрый доступ к часто используемой информации.

## Модули Detonation

### Модули, разработанные Solenopsys

Для функционирования инфраструктуры платформы разработаны следующие модули:

- **Authorisation**: Модуль ABAC для управления авторизацией и правами пользователей.
- **Logs**: Модуль для анализа логов, от системных до логов оборудования.
- **Backup**: Модуль резервного копирования данных.
- **CI/CD**: Модуль непрерывной интеграции.
- **Equipment**: Управление статусом оборудования и прошивками.
- **Pinning**: Модуль для закрепления данных в IPFS.

### Модули на базе OpenSource

Модули, основанные на других проектах с открытым исходным кодом:

- **IPFS**: Модуль для хранения данных в IPFS.
- **IPFS Cluster**: Модуль для распределенного хранения данных в IPFS Cluster.
- **Git**: Модуль-обертка для частного экземпляра Git, работающего в кластере.
- **Registry**: Модуль хранения и управления контейнерами.
- **Cosmos**: Модуль для взаимодействия с блокчейном Cosmos.

## Принципы разработки

### Отказ от интеграции тяжеловесных систем

Detonation отказывается от интеграции тяжеловесных систем с их собственной сложной инфраструктурой в пользу легких базовых технологий с настраиваемыми пользовательскими интерфейсами (UI-модулями). Примеры тяжеловесных систем включают Gitlab, Grafana, MAAS и OpenStack. Причины этого решения:

- Избыточность (90% функциональности этих систем не нужны)
- Высокий порог входа для пользователей
- Сложная интеграция и развертывание
- Отсутствие контроля над внутренней инфраструктурой и визуальным интерфейсом
- Высокие требования к ресурсам

### Отказ от интеграции приложений с собственными UI-интерфейсами

Примеры таких приложений включают Octoprint, Kubernetes Dashboard, Portainer и Cockpit. Можно использовать любые инструменты разработки, но они **не должны** встраиваться как модули в платформу Solenopsys.

### Готовые интеграции

Создание модулей Converged на основе существующих проектов с открытым исходным кодом, таких как системы баз данных PostgreSQL, Mongo и другие.

## Развертывание

Detonation обеспечивает простую установку узла через команду и такую же простую настройку кластера. Для управления используется инструмент командной строки `xs`.

## Минимальные требования

### Минимальные спецификации серверного узла

Сервер Detonation аналогичен стандартному домашнему компьютеру нижнего ценового диапазона стоимостью менее $1000. Обратите внимание, что такие варианты, как Raspberry Pi или Intel Atom, не подходят для этой цели.

- Доступный 4-ядерный процессор
- 16 ГБ оперативной памяти
- SSD с интерфейсом PCI Express 2.0
- Дополнительный SATA SSD
- Шесть HDD для хранения данных
- Недорогой GPU Nvidia
- Для соединения серверов требуется сетевая карта 10G

### Спецификации легкого узла

Для легкого узла подходит одноплатный компьютер на базе архитектуры ARM с 8 ядрами и 2 ГБ оперативной памяти. Примеры включают Nvidia Jetson, Raspberry Pi или любой другой аналогичный одноплатный компьютер.

## Заключение

Detonation предлагает мощную и гибкую платформу для распределенных вычислений, сочетающую в себе передовые технологии и принципы разработки. Благодаря своей модульной структуре, поддержке различных языков программирования и эффективным системам хранения данных, Detonation обеспечивает надежную основу для создания и развертывания современных приложений. Система разработана с учетом простоты использования и масштабируемости, что делает ее идеальным выбором для широкого спектра задач в области распределенных вычислений.