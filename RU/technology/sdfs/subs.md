

## Основные особенности системы

Новая система строится на распределении данных между множеством узлов (серверов или кластеров), при этом данные разбиваются на блоки, что позволяет организовать эффективное и быстрое хранение. Ключевые моменты работы системы включают:

- **Блоковая организация данных.** Как и в IPFS, файлы разделяются на блоки – начиная с 4 КБ и до 1 Мб с кратностью 4, 8, 16 КБ и выше. Такая сегментация позволяет оптимально использовать дисковое пространство и обеспечивает эффективность при чтении и записи данных. Плюс в том, что система использует алгоритм, который позволяет избежать фрагментации: большие блоки данных постепенно делятся на более мелкие, если это необходимо, и наоборот — при высвобождении памяти маленькие блоки объединяются в более крупные.

- **Распределённое хранение.** Система объединяет ресурсы всех узлов в единое хранилище. Каждый выделенный физический диск не используется локально для одного узла, а сразу становится общим ресурсом в рамках кластерного пространства. Это позволяет значительно повысить отказоустойчивость и масштабируемость.

- **Динамическая аллокация и балансировка нагрузки.** В отличие от традиционных систем, где блок данных привязан к конкретному узлу, здесь реализована динамическая ребалансировка. Она основана на алгоритмах распределения, учитывающих как географическое положение узлов, так и нагрузку на сеть и диски. Такой подход позволяет оптимально распределять данные, даже если размеры дисков или количество запросов изменяются со временем.

- **Отказ от архивирования как такового.** В новых решениях все данные хранятся в виде множества небольших блоков, связанных между собой в виде графа. Это устраняет необходимость создания архивов, позволяя использовать данные как активный кэш и сразу предоставлять пользователям актуальную информацию.

## Архитектура на разных уровнях

### Уровень хранения

На базовом уровне файловая система организована следующим образом:

- **Диски и блочная адресация.** Каждый физический диск делится на блоки определённого размера (например, по 256 Мб). В свою очередь, эти блоки разбиваются на маленькие части, соответствующие стандартным блокам оперативной системы (например, 4 КБ в 16-битной адресации). Это позволяет системе динамически изменять объём доступного пространства, объединяя диски в единое хранилище.

- **Оптимизация записи и чтения.** Использование алгоритмов, аналогичных тем, что применяются в операционной системе Linux для работы с оперативной памятью, обеспечивает быстрое получение доступа к данным. В результате система демонстрирует производительность в 10 раз выше по сравнению с аналогичными решениями вроде IPFS.

### Сетевой уровень

На уровне распределённой сети система отличается следующими особенностями:

- **Кластеризация и проксирование.** Каждый узел сети представляет собой не просто физический сервер, а кластер, где данные могут храниться локально и одновременно доступны для всех участников системы через прокси-узлы. Такая архитектура обеспечивает высокую пропускную способность сети: даже при большом числе узлов (например, 1 000) и ограниченной пропускной способности каждого (например, 50 Мбит/с) система способна обеспечить совместный доступ ко всем данным.

- **Метаданные и управление ресурсами.** В системе реализован центральный кластер метаданных, который управляет информацией о том, где находятся конкретные блоки данных. Это позволяет быстро выполнять задачи по динамической аллокации, перемещению данных между узлами и балансировке нагрузки.

- **Гибридное хранение: горячее и холодное.** Данные делятся на две категории: горячее хранилище (обычно на современных SSD или NVMe-дисках) для часто запрашиваемой информации и холодное хранилище (на HDD) для архивного хранения. Алгоритм позволяет автоматически перемещать данные с горячих дисков на холодные при снижении их актуальности, что оптимизирует использование ресурсов.

## Преимущества по сравнению с традиционными системами

Новая распределённая файловая система имеет несколько ключевых преимуществ:

1. **Высокая эффективность хранения.** Благодаря блочному подходу и динамической аллокации пространства, система устраняет необходимость создания громоздких архивов и обеспечивает более рациональное использование дискового пространства.
2. **Отказоустойчивость и масштабируемость.** Использование единого кластера ресурсов позволяет обеспечить высокую доступность данных даже при отказе отдельных узлов.
3. **Ускоренный доступ и высокая пропускная способность сети.** За счёт динамической балансировки нагрузки и распределённого управления данными система обеспечивает скорость доступа, превосходящую аналоги типа IPFS.
4. **Гибкость в управлении ресурсами.** Возможность объединения ресурсов дисков, распределённых по всей сети, делает систему привлекательной для использования в масштабных корпоративных и облачных решениях.
5. **Целостность и безопасность данных.** Система позволяет хранить данные в виде связанного графа, что упрощает проверку целостности и позволяет гибко управлять резервным копированием без сложных этапов архивирования.

## Заключение

Распределённая файловая система, описанная выше, демонстрирует принцип построения современного решения для хранения данных, объединяя в себе лучшие практики блочного хранения, динамической балансировки нагрузки и распределённого управления ресурсами. Такой подход позволяет избавиться от традиционных недостатков архивирования и обеспечивает высокую производительность, масштабируемость и отказоустойчивость, что особенно важно в эпоху стремительного роста информации и потребности быстрого доступа к ней.

Эта система способна объединить все доступные ресурсы в единое гибкое и эффективное хранилище, которое может адаптироваться к изменяющимся условиям работы и требованиям пользователей, тем самым открывая новые возможности для организации корпоративных и облачных инфраструктур.
 